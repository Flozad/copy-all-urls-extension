<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Copy All URLs</title>
        <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
        />
        <style>
            body {
                width: 420px;
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    "Helvetica Neue", Arial, sans-serif;
                overflow: hidden;
            }

            /* Smooth transitions */
            button,
            a,
            input,
            select,
            textarea {
                transition: all 0.2s;
            }

            /* Dropdown animation */
            #formatDropdown {
                animation: slideDown 0.2s ease-out;
            }

            @keyframes slideDown {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* ==================== DARK MODE STYLES ==================== */

            /* Manual dark mode */
            body.theme-dark {
                background-color: #0f0f0f !important;
                color: #e5e5e5;
            }

            body.theme-dark.bg-white {
                background-color: #0f0f0f !important;
            }

            body.theme-dark .bg-white {
                background-color: #2a2a2a !important;
            }

            body.theme-dark .bg-gray-100 {
                background-color: #3a3a3a !important;
            }

            body.theme-dark .bg-gray-50 {
                background-color: #252525 !important;
            }

            body.theme-dark .text-gray-900 {
                color: #f5f5f5 !important;
            }

            body.theme-dark .text-gray-800 {
                color: #e5e5e5 !important;
            }

            body.theme-dark .text-gray-700 {
                color: #d4d4d4 !important;
            }

            body.theme-dark .text-gray-600 {
                color: #a3a3a3 !important;
            }

            body.theme-dark .text-gray-500 {
                color: #8a8a8a !important;
            }

            body.theme-dark .border-gray-200 {
                border-color: #404040 !important;
            }

            body.theme-dark .border-gray-300 {
                border-color: #4a4a4a !important;
            }

            body.theme-dark .bg-black {
                background-color: #ffffff !important;
                color: #0f0f0f !important;
            }

            body.theme-dark .bg-black:hover {
                background-color: #e5e5e5 !important;
            }

            body.theme-dark .bg-gray-200:hover {
                background-color: #4a4a4a !important;
            }

            body.theme-dark #formatDropdown,
            body.theme-dark #sourceDropdown {
                background-color: #2a2a2a !important;
                border-color: #4a4a4a !important;
            }

            body.theme-dark .format-option,
            body.theme-dark .source-option {
                color: #e5e5e5 !important;
            }

            body.theme-dark .format-option:hover,
            body.theme-dark .source-option:hover {
                background-color: #3a3a3a !important;
            }

            body.theme-dark input[type="text"],
            body.theme-dark textarea,
            body.theme-dark select {
                background-color: #2a2a2a !important;
                border-color: #4a4a4a !important;
                color: #e5e5e5 !important;
            }

            body.theme-dark input[type="text"]:focus,
            body.theme-dark textarea:focus {
                background-color: #333333 !important;
                border-color: #ffffff !important;
            }

            body.theme-dark #message.bg-green-200 {
                background-color: #2e5d4a !important;
                color: #86efac !important;
            }

            body.theme-dark #message.bg-red-100 {
                background-color: #5a2a2a !important;
                color: #f87171 !important;
            }

            body.theme-dark #currentFormatIndicator {
                background-color: #3a3a3a !important;
                color: #e5e5e5 !important;
            }

            body.theme-dark #currentFormatIndicator:hover {
                background-color: #4a4a4a !important;
            }

            body.theme-dark .text-gray-900 svg {
                color: #f5f5f5 !important;
            }

            /* Auto mode - follows system preference */
            @media (prefers-color-scheme: dark) {
                body.theme-auto {
                    background-color: #0f0f0f !important;
                    color: #e5e5e5;
                }

                body.theme-auto.bg-white {
                    background-color: #0f0f0f !important;
                }

                body.theme-auto .bg-white {
                    background-color: #2a2a2a !important;
                }

                body.theme-auto .bg-gray-100 {
                    background-color: #3a3a3a !important;
                }

                body.theme-auto .bg-gray-50 {
                    background-color: #252525 !important;
                }

                body.theme-auto .text-gray-900 {
                    color: #f5f5f5 !important;
                }

                body.theme-auto .text-gray-800 {
                    color: #e5e5e5 !important;
                }

                body.theme-auto .text-gray-700 {
                    color: #d4d4d4 !important;
                }

                body.theme-auto .text-gray-600 {
                    color: #a3a3a3 !important;
                }

                body.theme-auto .text-gray-500 {
                    color: #8a8a8a !important;
                }

                body.theme-auto .border-gray-200 {
                    border-color: #404040 !important;
                }

                body.theme-auto .border-gray-300 {
                    border-color: #4a4a4a !important;
                }

                body.theme-auto .bg-black {
                    background-color: #ffffff !important;
                    color: #0f0f0f !important;
                }

                body.theme-auto .bg-black:hover {
                    background-color: #e5e5e5 !important;
                }

                body.theme-auto .bg-gray-200:hover {
                    background-color: #4a4a4a !important;
                }

                body.theme-auto #formatDropdown,
                body.theme-auto #sourceDropdown {
                    background-color: #2a2a2a !important;
                    border-color: #4a4a4a !important;
                }

                body.theme-auto .format-option,
                body.theme-auto .source-option {
                    color: #e5e5e5 !important;
                }

                body.theme-auto .format-option:hover,
                body.theme-auto .source-option:hover {
                    background-color: #3a3a3a !important;
                }

                body.theme-auto input[type="text"],
                body.theme-auto textarea,
                body.theme-auto select {
                    background-color: #2a2a2a !important;
                    border-color: #4a4a4a !important;
                    color: #e5e5e5 !important;
                }

                body.theme-auto input[type="text"]:focus,
                body.theme-auto textarea:focus {
                    background-color: #333333 !important;
                    border-color: #ffffff !important;
                }

                body.theme-auto #message.bg-green-200 {
                    background-color: #2e5d4a !important;
                    color: #86efac !important;
                }

                body.theme-auto #message.bg-red-100 {
                    background-color: #5a2a2a !important;
                    color: #f87171 !important;
                }

                body.theme-auto #currentFormatIndicator {
                    background-color: #3a3a3a !important;
                    color: #e5e5e5 !important;
                }

                body.theme-auto #currentFormatIndicator:hover {
                    background-color: #4a4a4a !important;
                }

                body.theme-auto .text-gray-900 svg {
                    color: #f5f5f5 !important;
                }
            }
        </style>
    </head>
    <body class="bg-white">
        <div class="p-6">
            <!-- Header -->
            <div class="mb-4 text-center">
                <h1
                    class="text-3xl font-bold text-gray-900 mb-2 flex items-center justify-center gap-2"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        width="32"
                        height="32"
                        fill="currentColor"
                        class="text-gray-900"
                    >
                        <path
                            d="m13.13 14.56l1.43-1.43L21 19.57L19.57 21zm4.29-5.73l2.86-2.86C16.33 2 9.93 2 6 5.95c3.91-1.3 8.29-.25 11.42 2.88M5.95 6C2 9.93 2 16.33 5.97 20.28l2.86-2.86C5.7 14.29 4.65 9.91 5.95 6m.02-.04l-.01.01C5.58 9 7.13 12.85 10.26 16L16 10.26c-3.14-3.13-7-4.68-10.03-4.3"
                        />
                    </svg>
                    Copy All URLs
                </h1>
                <p class="text-sm text-gray-600">
                    Copy all open tabs or paste links to open them instantly.
                </p>
            </div>

            <!-- Action Buttons Row -->
            <div class="flex items-center gap-2 mb-4">
                <!-- Copy URLs Button with Dropdown -->
                <div class="relative flex-1">
                    <div class="flex">
                        <button
                            id="actionCopy"
                            title="Copy all URLs from open tabs to clipboard"
                            class="flex-1 inline-flex items-center justify-center rounded-l-lg px-4 py-3 text-sm font-semibold bg-black text-white hover:bg-gray-800"
                        >
                            Copy URLs
                        </button>
                        <button
                            id="formatDropdownToggle"
                            title="Choose output format"
                            class="px-3 bg-black text-white hover:bg-gray-800 border-l border-gray-700 rounded-r-lg"
                        >
                            <svg
                                class="w-4 h-4"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                    clip-rule="evenodd"
                                />
                            </svg>
                        </button>
                    </div>

                    <!-- Format Dropdown Menu -->
                    <div
                        id="formatDropdown"
                        class="hidden absolute left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10"
                    >
                        <button
                            class="format-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm flex items-center"
                            data-format="text"
                        >
                            <span class="mr-2 w-4"></span>Text (URL + Title)
                        </button>
                        <button
                            class="format-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm flex items-center"
                            data-format="html"
                        >
                            <span class="mr-2 w-4"></span>HTML
                        </button>
                        <button
                            class="format-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm flex items-center"
                            data-format="json"
                        >
                            <span class="mr-2 w-4"></span>JSON
                        </button>
                        <button
                            class="format-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm flex items-center"
                            data-format="url_only"
                        >
                            <span class="mr-2 w-4">✓</span>URL Only
                        </button>
                        <button
                            class="format-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm flex items-center"
                            data-format="delimited"
                        >
                            <span class="mr-2 w-4"></span>Delimited
                        </button>
                        <button
                            class="format-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm rounded-b-lg flex items-center"
                            data-format="custom"
                        >
                            <span class="mr-2 w-4"></span>Custom
                        </button>
                    </div>
                </div>

                <!-- Paste URLs Button -->
                <button
                    id="actionPaste"
                    title="Open URLs from textarea or clipboard as new tabs"
                    class="px-4 py-3 text-sm font-semibold bg-black text-white hover:bg-gray-800 rounded-lg"
                >
                    Paste URLs
                </button>

                <!-- Settings Button -->
                <button
                    id="optionsButton"
                    class="flex items-center justify-center w-11 h-11 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 hover:text-gray-900 transition-colors cursor-pointer"
                    title="Open settings"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-5 h-5"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                            clip-rule="evenodd"
                        />
                    </svg>
                </button>
            </div>

            <!-- Advanced Format Settings -->
            <div id="formatAdvancedSettings" class="hidden mb-3">
                <!-- Delimited Settings -->
                <div id="delimitedSettings" class="hidden mb-4">
                    <label
                        class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2"
                        >Delimiter</label
                    >
                    <input
                        type="text"
                        id="delimiterInput"
                        title="Character(s) to separate title and URL"
                        class="w-full px-4 py-3 text-base font-mono border-3 border-black rounded-xl focus:ring-2 focus:ring-black focus:outline-none"
                        placeholder="--"
                        value="--"
                        style="border-width: 3px"
                    />
                    <p class="text-xs text-gray-500 mt-2">
                        Common: \t (tab), , (comma), | (pipe)
                    </p>
                </div>

                <!-- Custom Template Settings -->
                <div id="customSettings" class="hidden mb-4">
                    <label
                        class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2"
                        >Custom Format</label
                    >
                    <input
                        type="text"
                        id="customTemplateInput"
                        title="Create a custom format using variables"
                        class="w-full px-4 py-3 text-base font-mono border-3 border-black rounded-xl focus:ring-2 focus:ring-black focus:outline-none"
                        placeholder="$url - $title"
                        style="border-width: 3px"
                    />
                    <p class="text-xs text-gray-500 mt-2">
                        Variables: $url, $title, $date
                    </p>
                </div>
            </div>

            <!-- Content Textarea -->
            <div class="mb-2">
                <textarea
                    id="copiedContent"
                    title="Copied URLs appear here. You can also paste/edit URLs before opening them."
                    class="w-full px-3 py-3 text-sm font-mono border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-black focus:outline-none resize-y"
                    rows="8"
                    placeholder="Copied URLs will appear here. You can also paste URLs to open them..."
                ></textarea>
            </div>

            <!-- Format and Paste Source Indicators (Below Textarea) -->
            <div class="mb-4 flex gap-2">
                <!-- Format Indicator -->
                <div class="relative">
                    <button
                        id="currentFormatIndicator"
                        class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors"
                        title="Click to change format"
                    >
                        <span>Format: URL Only</span>
                        <svg
                            class="w-3 h-3"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd"
                            />
                        </svg>
                    </button>
                </div>

                <!-- Paste Source Indicator -->
                <div class="relative">
                    <button
                        id="currentSourceIndicator"
                        class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors"
                        title="Click to change paste source"
                    >
                        <span>Paste: Clipboard</span>
                        <svg
                            class="w-3 h-3"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                                clip-rule="evenodd"
                            />
                        </svg>
                    </button>

                    <!-- Source Dropdown Menu -->
                    <div id="sourceDropdown" class="hidden absolute left-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-20 min-w-[160px]">
                        <button class="source-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm flex items-center rounded-t-lg" data-source="clipboard">
                            <span class="mr-2 w-4">✓</span>Clipboard
                        </button>
                        <button class="source-option w-full text-left px-4 py-2 hover:bg-gray-100 text-sm rounded-b-lg flex items-center" data-source="textarea">
                            <span class="mr-2 w-4"></span>Textarea
                        </button>
                    </div>
                </div>
            </div>

            <!-- Message Display -->
            <div
                id="message"
                class="text-sm font-medium text-center py-3 px-4 rounded-lg transition-opacity duration-300 opacity-0 mb-4"
            ></div>

            <!-- Footer -->
            <div class="pt-2 border-t border-gray-200">
                <div
                    class="flex items-center justify-center space-x-2 text-xs text-gray-500"
                >
                    <a
                        href="https://github.com/Flozad"
                        target="_blank"
                        title="View source code on GitHub"
                        class="hover:text-gray-900 hover:underline"
                        >GitHub</a
                    >
                    <span>|</span>
                    <a
                        href="https://clasicwebtools.com"
                        target="_blank"
                        title="Visit developer website"
                        class="hover:text-gray-900 hover:underline"
                        >My site</a
                    >
                    <span>|</span>
                    <a
                        href="https://twitter.com/lozards"
                        target="_blank"
                        title="Follow on Twitter"
                        class="hover:text-gray-900 hover:underline"
                        >Twitter</a
                    >
                </div>
            </div>
        </div>

        <script src="./utils/defaults.js"></script>
        <script src="./utils/storage.js"></script>
        <script src="./popup.js"></script>
    </body>
</html>
